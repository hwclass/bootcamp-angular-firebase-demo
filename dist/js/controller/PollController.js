define(function(){return["$scope","PollConfig","$firebase",function($scope,PollConfig,$firebase){"use strict";var ref=new Firebase(PollConfig.firebase.url),sync=$firebase(ref);$scope.answers=sync.$asArray(),$scope.choice=null,$scope.answers.$loaded().then(function(){calculatePersents()}),$scope.submitPollForm=function(){for(var counterForAnswers=0,len=$scope.answers.length;len>counterForAnswers;counterForAnswers++)if($scope.choice===$scope.answers[counterForAnswers].$id){$scope.answers[counterForAnswers].vote=$scope.answers[counterForAnswers].vote+1,$scope.answers.$save(counterForAnswers);for(var totalVotes=0,counterForTotalVotes=0,len=$scope.answers.length;len>counterForTotalVotes;counterForTotalVotes++)totalVotes+=$scope.answers[counterForTotalVotes].vote;var formattedFloat=new Number($scope.answers[counterForAnswers].vote/totalVotes*100).toFixed(0);angular.element("#votes-"+counterForAnswers).text("% "+(formattedFloat>0?formattedFloat:0))}calculatePersents()};var calculatePersents=function(){for(var counterForAnswers=0,len=$scope.answers.length;len>counterForAnswers;counterForAnswers++){for(var totalVotes=0,counterForTotalVotes=0,len=$scope.answers.length;len>counterForTotalVotes;counterForTotalVotes++)totalVotes+=$scope.answers[counterForTotalVotes].vote;var formattedFloat=new Number($scope.answers[counterForAnswers].vote/totalVotes*100).toFixed(0);angular.element("#votes-"+counterForAnswers).text("% "+(formattedFloat>0?formattedFloat:0))}}}]});